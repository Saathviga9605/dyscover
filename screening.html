<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Try Screening</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=OpenDyslexic&display=swap" rel="stylesheet">
  <style>
    .fun-gif {
      transition: opacity 0.5s ease;
    }
    .hidden {
      opacity: 0;
      visibility: hidden;
      height: 0;
      overflow: hidden;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">Dyscover</div>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="screening.html">Try Screening</a></li>
      <li><a href="sample_report.html">Sample Report</a></li>
      <li><a href="contact.html">Contact Us</a></li>
    </ul>
  </nav>

  <!-- Game Title -->
  <div class="game-title">Time for screening!</div>
  <p class="game-p">
    Keep calm, kiddo! This is just a game! No stress! No pressure! Just have fun and we'll take care of the rest!
  </p>

  <!-- Fun GIF -->
  <div id="gif-wrapper" class="fun-gif">
    <div class="tenor-gif-embed" data-postid="21800367" data-share-method="host" data-aspect-ratio="5" data-width="100%">
      <a href="https://tenor.com/view/rascal-have-fun-gif-21800367">Rascal Have Fun Sticker</a> from 
      <a href="https://tenor.com/search/rascal-stickers">Rascal Stickers</a>
    </div>
    <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
  </div>

  <!-- Level 1 Screening Game Panel -->
<div class="game-panel" id="gamePanel">
  <div class="game-question" id="gameQuestion">Loading question...</div>
  <div class="game-area" id="gameArea"></div>
  <div class="game-feedback" id="gameFeedback"></div>
  <button class="next-btn" id="nextBtn" onclick="loadNextQuestion()">Next</button>
</div>

<style>
  .game-question {
    text-align: center;
    font-size: 22px;
    font-weight: bold;
    margin: 30px 0 10px;
    color: #6237a0;
  }

  .game-area {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin: 20px 0;
    gap: 20px;
  }

  .game-box {
    width: 100px;
    height: 100px;
    font-size: 40px;
    font-weight: bold;
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: 0.3s ease;
  }

  .game-box:hover {
    transform: scale(1.1);
    background-color: #f0e5ff;
  }

  .game-feedback {
    text-align: center;
    font-size: 18px;
    margin-top: 15px;
    font-weight: 600;
    color: #444;
  }

  .next-btn {
    display: block;
    margin: 20px auto;
    padding: 10px 30px;
    font-size: 16px;
    border: none;
    background-color: #6237a0;
    color: white;
    border-radius: 8px;
    cursor: pointer;
  }

  .next-btn:hover {
    background-color: #4a2c7c;
  }
</style>

<script>
  const gameData = [
    {
      question: "Click all the letter 'b's!",
      letters: ['b', 'd', 'p', 'b', 'q', 'b', 'd', 'p'],
      correct: ['b']
    },
    {
      question: "Click all the letter 'd's!",
      letters: ['b', 'd', 'p', 'q', 'd', 'p', 'd'],
      correct: ['d']
    },
    {
      question: "Click all the letter 'p's!",
      letters: ['p', 'b', 'd', 'q', 'p', 'p', 'b'],
      correct: ['p']
    },
    {
      question: "Click all the letter 'q's!",
      letters: ['q', 'd', 'b', 'q', 'p', 'q', 'b'],
      correct: ['q']
    },
    {
      question: "Mirror World: Click all flipped 'b's! (look carefully!)",
      letters: ['b', 'â†ƒ', 'd', 'ð°', 'b', 'Ô', 'q'],
      correct: ['ð°']
    },
    {
      question: "Mirror World: Click all flipped 'd's!",
      letters: ['p', 'â†ƒ', 'q', 'á‘«', 'd', 'Ô', 'á‘¯'],
      correct: ['á‘«']
    },
    {
      question: "Fast Flash: What word did you see?",
      type: "flash",
      word: "cat"
    },
    {
      question: "Fast Flash: What word did you see?",
      type: "flash",
      word: "dog"
    },
    {
      question: "Fast Flash: What word did you see?",
      type: "flash",
      word: "book"
    },
    {
      question: "Fast Flash: What word did you see?",
      type: "flash",
      word: "jump"
    }
  ];

  let current = 0;
  let score = 0;

  function loadNextQuestion() {
    const question = gameData[current];
    const questionBox = document.getElementById('gameQuestion');
    const area = document.getElementById('gameArea');
    const feedback = document.getElementById('gameFeedback');
    const nextBtn = document.getElementById('nextBtn');
    feedback.textContent = "";
    area.innerHTML = "";

    if (!question) {
      questionBox.textContent = "You've completed Level 1! ðŸŽ‰ Your score: " + score + "/" + gameData.length;
      nextBtn.style.display = "none";
      return;
    }

    if (question.type === "flash") {
      questionBox.textContent = question.question;
      const flash = document.createElement('div');
      flash.style.fontSize = '48px';
      flash.style.fontWeight = 'bold';
      flash.textContent = question.word;
      area.appendChild(flash);
      setTimeout(() => {
        area.innerHTML = '<input type="text" placeholder="What did you see?" id="flashInput">';
        const submitBtn = document.createElement('button');
        submitBtn.textContent = "Submit";
        submitBtn.className = "next-btn";
        submitBtn.onclick = () => {
          const val = document.getElementById('flashInput').value.toLowerCase().trim();
          if (val === question.word) {
            feedback.textContent = "âœ… Correct!";
            score++;
          } else {
            feedback.textContent = "âŒ Incorrect. It was '" + question.word + "'";
          }
          setTimeout(() => {
            current++;
            loadNextQuestion();
          }, 1200);
        };
        area.appendChild(submitBtn);
      }, 1000);
      return;
    }

    questionBox.textContent = question.question;
    question.letters.forEach(letter => {
      const box = document.createElement('div');
      box.className = 'game-box';
      box.textContent = letter;
      box.addEventListener('click', () => {
        if (question.correct.includes(letter)) {
          box.style.backgroundColor = '#b3ffcc';
          score++;
        } else {
          box.style.backgroundColor = '#ffb3b3';
        }
        box.style.pointerEvents = 'none';
      });
      area.appendChild(box);
    });

    current++;
  }

  window.onload = () => {
    loadNextQuestion();
  };
</script>


  <!-- Game Description -->
  <div class="game-description">
    This interactive game is designed to make early detection of dyslexia simple and engaging. By analyzing how children interact with language-based challenges, we aim to identify potential signs of dyslexia in a safe, non-judgmental space. While this tool is not a replacement for clinical evaluation, it serves as a valuable early alert mechanism for parents and educators.
  </div>

 
<!-- Chatbot Toggle Icon -->
<button class="chatbot-toggle" onclick="toggleChatbot()">
  ðŸ’¬
</button>

<!-- Chatbot Window -->
<div class="chatbot-window" id="chatbot">
  <div class="chatbot-header">
    <span> Ask Lexi ðŸ¤–</span>
    <button onclick="toggleChatbot()">âœ–</button>
  </div>
  <div class="chatbot-body" id="chatbot-body">
    <div><strong>Lexi:</strong> Hello! How can I help you today?</div>
  </div>
  <div class="chatbot-input">
    <input type="text" id="user-input" placeholder="Type your question..." onkeydown="if(event.key === 'Enter') sendMessage()">
    <button onclick="startListening()" title="Speak" aria-label="Start voice input">
      <img src="https://img.icons8.com/material-outlined/24/6237a0/microphone--v1.png" alt="Mic">
    </button>
    <button onclick="sendMessage()" title="Send" aria-label="Send message">
      <img src="https://img.icons8.com/ios-glyphs/24/6237a0/filled-sent.png" alt="Send">
    </button>
  </div>
</div>

<!-- Chatbot Scripts -->
<script>
  function toggleChatbot() {
    const chatbot = document.getElementById('chatbot');
    chatbot.classList.toggle('open');
  }

  function sendMessage() {
    const input = document.getElementById('user-input');
    const message = input.value.trim();
    if (!message) return;

    const chat = document.getElementById('chatbot-body');
    const userMsg = document.createElement('div');
    userMsg.innerHTML = "<strong>You:</strong> " + message;
    chat.appendChild(userMsg);

    const botMsg = document.createElement('div');
    botMsg.innerHTML = "<strong>Bot:</strong> I'm still learning! Try again later.";
    setTimeout(() => chat.appendChild(botMsg), 800);

    input.value = '';
    chat.scrollTop = chat.scrollHeight;
  }

  function startListening() {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'en-IN';
    recognition.onresult = function (event) {
      document.getElementById('user-input').value = event.results[0][0].transcript;
      sendMessage();
    };
    recognition.start();
  }
</script>
<div class="chatbot-window" id="chatbot">
  <div class="chatbot-header">
    <span>Chat with us</span>
    <button onclick="toggleChatbot()">âœ–</button>
  </div>
  <div class="chatbot-body" id="chatbot-body">
    <div><strong>Bot:</strong> Hello! How can I help you today?</div>
  </div>
  <div class="chatbot">
    <div class="chatbot-header">Ask Me Anything!</div>
    <div class="chatbot-messages" id="chat-messages"></div>
    <div class="chatbot-input">
      <input type="text" id="user-input" placeholder="Type your question..." onkeydown="if(event.key === 'Enter') sendMessage()">
      <button onclick="startListening()" title="Speak" aria-label="Start voice input">
        <img src="https://img.icons8.com/material-outlined/24/ffffff/microphone--v1.png" alt="Mic">
      </button>
      <button onclick="sendMessage()" title="Send" aria-label="Send message">
        <img src="https://img.icons8.com/ios-glyphs/24/ffffff/filled-sent.png" alt="Send">
      </button>
    </div>
  </div>
  <script>
    function sendMessage() {
      const input = document.getElementById('user-input');
      const message = input.value.trim();
      if (!message) return;

      const chat = document.getElementById('chat-messages');
      const userMsg = document.createElement('div');
      userMsg.textContent = "ðŸ§‘â€ðŸ’» You: " + message;
      chat.appendChild(userMsg);

      const botMsg = document.createElement('div');
      botMsg.textContent = "ðŸ¤– Bot: I'm still learning! Try again later.";
      setTimeout(() => chat.appendChild(botMsg), 800);

      input.value = '';
      chat.scrollTop = chat.scrollHeight;
    }

    function startListening() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = 'en-IN';
      recognition.onresult = function (event) {
        document.getElementById('user-input').value = event.results[0][0].transcript;
        sendMessage();
      };
      recognition.start();
    }
  </script>
  <script src="script.js"></script>
  <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
    <footer id="contact">
    <p>Contact us at <a href="mailto:support@dyscover.org">support@dyscover.org</a></p>
  </footer>
  
  <!-- Script to hide GIF -->
  <script>
    setTimeout(() => {
      document.getElementById('gif-wrapper').classList.add('hidden');
    }, 5000);
  </script>

</body>
</html>
